import{_ as E,C as d,c as p,o as t,a2 as l,b as n,j as i,w as a,a as s,G as r,a3 as A}from"./chunks/framework.CriqKoQt.js";const w=JSON.parse('{"title":"PMD NPM 优化","description":"","frontmatter":{},"headers":[],"relativePath":"docs/work/119.pmd-article.md","filePath":"docs/work/119.pmd-article.md","lastUpdated":1767978505000}'),g={name:"docs/work/119.pmd-article.md"};function u(m,e,B,b,c,k){const o=d("Mermaid");return t(),p("div",null,[e[8]||(e[8]=l("",6)),(t(),n(A,null,{default:a(()=>[r(o,{id:"mermaid-23",class:"mermaid my-mermaid-class",graph:"graph%20TD%0A%20%20widget%20--%3E%20tools%0A%20%20widget%20--%3E%20network%0A%20%20widget%20--%3E%20aegis%0A%0A%20%20vue%20--%3E%20report%0A%20%20vue%20--%3E%20tools%0A%20%20vue%20--%3E%20config%0A%20%20vue%20--%3E%20aegis%0A%20%20vue%20--%3E%20types%0A%20%20vue%20--%3E%20location%0A%20%20vue%20--%3E%20widget%0A%20%20vue%20--%3E%20network%0A%20%20vue%20--%3E%20login%0A%0A%20%20use%20--%3E%20tools%0A%20%20use%20--%3E%20widget%0A%0A%20%20tools%20--%20%E5%8F%8D%E5%90%91%20--%3E%20network%0A%20%20tools%20--%3E%20types%0A%20%20tools%20--%20%E5%8F%8D%E5%90%91%20--%3E%20vue%0A%0A%20%20report%20--%3E%20tools%0A%20%20report%20--%3E%20types%0A%20%20report%20--%3E%20config%0A%20%20report%20--%3E%20network%0A%0A%20%20pixui%20--%3E%20network%0A%20%20pixui%20--%3E%20config%0A%0A%20%20network%20--%3E%20types%0A%0A%20%20netbar%20--%3E%20tools%0A%0A%20%20login%20--%3E%20tools%0A%20%20login%20--%3E%20widget%0A%20%20login%20--%3E%20report%0A%20%20login%20--%3E%20types%0A%20%20login%20--%3E%20config%0A%20%20login%20--%3E%20network%0A%0A%20%20location%20--%3E%20widget%0A%20%20location%20--%3E%20tools%0A%20%20location%20--%3E%20network%0A%0A%20%20jsapi%20--%3E%20types%0A%20%20jsapi%20--%3E%20tools%0A%0A%20%20config%20--%3E%20types%0A%0A%20%20aegis%20--%3E%20tools%0A%0A%20%20abtest%20--%3E%20types%0A%20%20abtest%20--%3E%20network%0A%20%20abtest%20--%3E%20aegis%0A"})]),fallback:a(()=>e[0]||(e[0]=[s(" Loading... ")])),_:1})),e[9]||(e[9]=i("p",null,"优化后是清晰的三层结构。",-1)),e[10]||(e[10]=i("img",{src:"https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/12/own_mike_hT3MyBP56shhdpBe.png",width:"900"},null,-1)),e[11]||(e[11]=i("p",null,"内部模块实际依赖关系：",-1)),(t(),n(A,null,{default:a(()=>[r(o,{id:"mermaid-31",class:"mermaid my-mermaid-class",graph:"graph%20TD%0A%25%25%20widget%20--%3E%20network%0A%25%25%20widget%20--%3E%20tools%0A%25%25%20widget%20--%3E%20aegis%0A%25%25%20widget%20--%3E%20business%0Aweixin%20--%3E%20network%0Aweixin%20--%3E%20tools%0A%25%25%20vue%20--%3E%20business%0A%25%25%20vue%20--%3E%20tools%0A%25%25%20vue%20--%3E%20report%0A%25%25%20vue%20--%3E%20aegis%0A%25%25%20vue%20--%3E%20widget%0A%25%25%20vue%20--%3E%20config%0A%25%25%20vue%20--%3E%20share%0A%25%25%20vue%20--%3E%20weixin%0Ause%20--%3E%20tools%0A%25%25%20tools%20--%3E%20weixin%0A%25%25%20tools%20--%3E%20game-config%0Ashare%20--%3E%20tools%0Ashare%20--%3E%20aegis%0Areport%20--%3E%20tools%0Areport%20--%3E%20network%0Areport%20--%3E%20config%0Apixui%20--%3E%20network%0Apixui%20--%3E%20config%0Anetbar%20--%3E%20tools%0Alogin%20--%3E%20tools%0Alogin%20--%3E%20report%0Alogin%20--%3E%20config%0Alogin%20--%3E%20network%0Alocation%20--%3E%20tools%0Alocation%20--%3E%20weixin%0Alocation%20--%3E%20network%0Ajsapi%20--%3E%20tools%0A%25%25%20config%20--%3E%20game-config%0Aconfig%20--%3E%20tools%0A%25%25%20config%20--%3E%20vue%0Abusiness%20--%3E%20report%0Abusiness%20--%3E%20tools%0Abusiness%20--%3E%20config%0Abusiness%20--%3E%20aegis%0Abusiness%20--%3E%20location%0A%25%25%20business%20--%3E%20widget%0Abusiness%20--%3E%20share%0Abusiness%20--%3E%20network%0Abusiness%20--%3E%20login%0Aaegis%20--%3E%20tools%0Aabtest%20--%3E%20tools%0Aabtest%20--%3E%20network%0Aabtest%20--%3E%20aegis%0A%0A%0Asubgraph%20base%5B%20%5D%0Atools%0Aconfig%0Anetwork%0Agame-config%0Aaegis%0Aend%0A%0Asubgraph%20businessModule%5B%20%5D%0Abusiness%0Anetbar%0Aend%0A%0Asubgraph%20middle%5B%20%5D%0Alocation%0Areport%0Alogin%0Apixui%0Aabtest%0Ajsapi%0Ause%0Ashare%0Aweixin%0Aend%0A"})]),fallback:a(()=>e[1]||(e[1]=[s(" Loading... ")])),_:1})),e[12]||(e[12]=i("ol",null,[i("li",null,"总体三层结构，基础、业务中间层、业务上层"),i("li",null,"无反向依赖"),i("li",null,[s("独立的 "),i("code",null,"types"),s(" 已移除，放到对应的包之中")])],-1)),e[13]||(e[13]=i("h2",{id:"_3-版本发布",tabindex:"-1"},[s("3. 版本发布 "),i("a",{class:"header-anchor",href:"#_3-版本发布","aria-label":'Permalink to "3. 版本发布"'},"​")],-1)),(t(),n(A,null,{default:a(()=>[r(o,{id:"mermaid-52",class:"mermaid my-mermaid-class",graph:"graph%20LR%0A%20%20build%5BBuild%5D%20--%3E%20bump%5BBump%20Version%5D%0A%20%20bump%20--%3E%20changelog%5BChange%20Log%5D%0A%20%20changelog%20--%3E%20commit%5BCommit%5D%0A%20%20commit%20--%3E%20tag%5BTag%5D%0A%20%20tag%20--%3E%20publish%5BPublish%5D%0A%20%20publish%20--%3E%20message%5BMessage%5D%0A"})]),fallback:a(()=>e[2]||(e[2]=[s(" Loading... ")])),_:1})),e[14]||(e[14]=i("h2",{id:"_4-版本更新策略",tabindex:"-1"},[s("4. 版本更新策略 "),i("a",{class:"header-anchor",href:"#_4-版本更新策略","aria-label":'Permalink to "4. 版本更新策略"'},"​")],-1)),(t(),n(A,null,{default:a(()=>[r(o,{id:"mermaid-56",class:"mermaid my-mermaid-class",graph:"graph%20TD%0A%20%20start%5B%E8%8E%B7%E5%8F%96%E4%B8%8B%E4%B8%80%E7%89%88%E6%9C%AC%5D%20--%3E%20isPrerelease%7Btype%20%E4%B8%BA%3Cbr%2F%3E%E9%A2%84%E5%8F%91%E5%B8%83%7D%0A%20%20isPrerelease%20--%E6%98%AF--%3E%20isPrereleaseVersionExisted%7B%E5%B7%B2%E5%AD%98%E5%9C%A8%E7%9B%B8%E5%90%8C%E7%B1%BB%E5%9E%8B%3Cbr%2F%3E%E9%A2%84%E5%8F%91%E5%B8%83%E7%89%88%E6%9C%AC%7D%0A%20%20isPrerelease%20--%E5%90%A6--%3E%20releaseVersion%5B%22inc(latest%2C%20type)%22%5D%0A%20%20isPrereleaseVersionExisted%20--%E6%98%AF--%3E%20isSmallThanLatest%7Blatest%20%E5%A4%A7%E4%BA%8E%3Cbr%2F%3E%E4%B9%8B%E5%89%8D%E9%A2%84%E5%8F%91%E5%B8%83%E7%89%88%E6%9C%AC%7D%0A%20%20isSmallThanLatest%20--%E6%98%AF--%3E%20getNextVersion%5B%22inc(latest%2C%20'prepatch'%2C%20type)%22%5D%0A%20%20isSmallThanLatest%20--%E5%90%A6--%3E%20getNextVersion2%5B%22inc(old%2C%20'prerelease'%2C%20type)%22%5D%0A%20%20isPrereleaseVersionExisted%20--%E5%90%A6--%3E%20getNextVersion3%5B%22inc(latest%2C'prerelease'%2Ctype)%22%5D%0A"})]),fallback:a(()=>e[3]||(e[3]=[s(" Loading... ")])),_:1})),e[15]||(e[15]=i("h2",{id:"_5-网络框架",tabindex:"-1"},[s("5. 网络框架 "),i("a",{class:"header-anchor",href:"#_5-网络框架","aria-label":'Permalink to "5. 网络框架"'},"​")],-1)),(t(),n(A,null,{default:a(()=>[r(o,{id:"mermaid-60",class:"mermaid my-mermaid-class",graph:"graph%20LR%0Abusiness%5B%E4%B8%9A%E5%8A%A1%5D%20--%3E%20post%0Abusiness%20--%3E%20initNetworkManager%0A%0AinitNetworkManager%20-.-%3E%20WebRequestFactory%0AinitNetworkManager%20-.-%3E%20MpRequestFactory%0AinitNetworkManager%20-.-%3E%20AppRequestFactory%0AinitNetworkManager%20-.-%3E%20PixuiRequestFactory%0AinitNetworkManager%20--%3E%20NetworkManager%0A%0AWebRequestFactory%20--%3E%20BaseRequestFactory%5B%5BBaseRequestFactory%5D%5D%0AWebRequestFactory%20--%3E%20WebRequest%0A%0AWebRequest%20--%3E%20BaseRequest%5B%5BBaseRequest%5D%5D%0A%0Asubgraph%20pmdNetwork%5Bpmd-network%5D%0AWebRequestFactory%0AMpRequestFactory%0AAppRequestFactory%0APixuiRequestFactory%0A%0ANetworkManager%0A%0AWebRequest%0ABaseRequest%0ABaseRequestFactory%0Aend%0A%0Asubgraph%20pmdBusiness%5Bpmd-business%5D%0Apost%0AinitNetworkManager%0Aend%0A"})]),fallback:a(()=>e[4]||(e[4]=[s(" Loading... ")])),_:1})),e[16]||(e[16]=i("h2",{id:"_6-小程序登录",tabindex:"-1"},[s("6. 小程序登录 "),i("a",{class:"header-anchor",href:"#_6-小程序登录","aria-label":'Permalink to "6. 小程序登录"'},"​")],-1)),e[17]||(e[17]=i("p",null,"整体流程",-1)),(t(),n(A,null,{default:a(()=>[r(o,{id:"mermaid-67",class:"mermaid my-mermaid-class",graph:"graph%20TD%0AgetCode%20--%22code%20%2B%20appId%20%2B%20loginType%22--%3E%20code2Ticket%0A"})]),fallback:a(()=>e[5]||(e[5]=[s(" Loading... ")])),_:1})),e[18]||(e[18]=i("p",null,"获取 code 流程",-1)),(t(),n(A,null,{default:a(()=>[r(o,{id:"mermaid-71",class:"mermaid my-mermaid-class",graph:"graph%20TD%0AloginMp%5B%E5%BC%80%E5%A7%8B%5D%20--%E9%80%89%E6%8B%A9%E7%99%BB%E5%BD%95%E7%B1%BB%E5%9E%8B--%3E%20selectLoginTypeInWxMini%0A%0AselectLoginTypeInWxMini%20--%3E%20isOnlyWX%7B%E9%9D%9EQQ%E7%8E%AF%E5%A2%83%E6%88%96%3Cbr%2F%3E%E5%8F%AA%E6%94%AF%E6%8C%81%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95%7D%0A%0AisOnlyWX%20--%E5%90%A6--%3E%20selectWXQQLoginType%7BselectWXQQLoginType%7D%0A%0AisOnlyWX%20--%E6%98%AF--%3E%20%20getWxCode%20--%3E%20uniLogin%5B%22uni.login%22%5D%20--%3E%20wxCode%0A%0AselectWXQQLoginType%20--%E5%BE%AE%E4%BF%A1--%3E%20getWxCode%0AselectWXQQLoginType%20--QQ--%3E%20pluginLogin%5B%22plugin.login%22%5D%20--%3E%20qqCode%0A"})]),fallback:a(()=>e[6]||(e[6]=[s(" Loading... ")])),_:1})),e[19]||(e[19]=l("",5)),(t(),n(A,null,{default:a(()=>[r(o,{id:"mermaid-96",class:"mermaid my-mermaid-class",graph:"graph%20TD%0A%0Asubgraph%20initInner%5B%20%5D%0Aloader%20--%22sdk%22--%3E%20umd%0Aumd%20--%3E%20iniShareInner%5BiniShare%5D%0AiniShareInner%20--%3E%20msdkV5%0AiniShareInner%20--%3E%20msdk%0AiniShareInner%20--%3E%20gHelper%0AiniShareInner%20--%3E%20qq%0AiniShareInner%20--%3E%20wx%0AiniShareInner%20--%3E%20miniprogram%0AiniShareInner%20--%3E%20pvpapp%0AiniShareInner%20--%3E%20tipapp%0AiniShareInner%20--%3E%20slugSdk%0Aend%0A%0AiniShare%20--%3E%20initInner%0A"})]),fallback:a(()=>e[7]||(e[7]=[s(" Loading... ")])),_:1}))])}const D=E(g,[["render",u]]);export{w as __pageData,D as default};
