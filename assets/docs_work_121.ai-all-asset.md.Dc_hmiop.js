import{_ as n,C as p,c as h,o,a2 as r,b as t,j as c,w as e,a as l,G as s,a3 as d}from"./chunks/framework.CriqKoQt.js";const b=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"docs/work/121.ai-all-asset.md","filePath":"docs/work/121.ai-all-asset.md","lastUpdated":1768035076000}'),m={name:"docs/work/121.ai-all-asset.md"};function E(g,a,A,_,f,k){const i=p("Mermaid");return o(),h("div",null,[a[6]||(a[6]=r('<h2 id="_1-位图" tabindex="-1">1. 位图 <a class="header-anchor" href="#_1-位图" aria-label="Permalink to &quot;1. 位图&quot;">​</a></h2><h3 id="_1-1-问题" tabindex="-1">1.1. 问题 <a class="header-anchor" href="#_1-1-问题" aria-label="Permalink to &quot;1.1. 问题&quot;">​</a></h3><blockquote><p>痛点1：手动在视觉设计稿中切图（用作项目静态图片或动态图片）——&gt; 手动上传到 cos git 仓库、触发流水线上传到业务 cos 桶或手动直接上传到业务 cos 桶</p><p>痛点2：部分没接入 cos git 的业务，手动直达上传到业务cos桶，仍然需要肉眼检查图片是否重命名(不检测的话，覆盖线上资源会导致业务事故)</p></blockquote><h3 id="_1-2-优化" tabindex="-1">1.2. 优化 <a class="header-anchor" href="#_1-2-优化" aria-label="Permalink to &quot;1.2. 优化&quot;">​</a></h3><ol><li>提供 <code>upload-mcp</code> 工具，IDE 中一键上传</li><li>自动压缩图片</li><li>自动同步 <code>cos.git</code> 仓库，方便后续修改</li></ol><p>已有</p><ol><li>通过 <code>cos.git</code> 上传</li><li>通过在线工具上传</li></ol><p><code>mcp</code> 上传流程</p>',8)),(o(),t(d,null,{default:e(()=>[s(i,{id:"mermaid-52",class:"mermaid my-mermaid-class",graph:"graph%20LR%0Amcp%20--%20tinypng%20--%3E%20compressed%0Acompressed%20--upload--%3E%20cos%0Acos%20--%E5%9B%9E%E5%86%99--%3E%20git%0A"})]),fallback:e(()=>a[0]||(a[0]=[l(" Loading... ")])),_:1})),a[7]||(a[7]=c("p",null,"修改时",-1)),(o(),t(d,null,{default:e(()=>[s(i,{id:"mermaid-56",class:"mermaid my-mermaid-class",graph:"graph%20LR%0Agit%20--%E6%8F%90%E4%BA%A4--%3E%20cos%0A"})]),fallback:e(()=>a[1]||(a[1]=[l(" Loading... ")])),_:1})),a[8]||(a[8]=r(`<p>注意，由于 COS 的 <code>open api</code> 限制一个前缀目录下只能拉取 1000 个文件，所以建议一个目录不要放太多东西。</p><p>在 <code>cos.git</code> 的 <a href="https://git.woa.com/pmd-mobile/pmd-h5/cos/blob/master/.cos/sync.config.js" target="_blank" rel="noreferrer">.cos/sync.config.js</a> 文件中存放要拉取的前缀列表，如</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  getBucketLitPrefixList: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;image-1251917893&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;general-match/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;pmd-icon/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h3 id="_1-3-三位一体" tabindex="-1">1.3. 三位一体 <a class="header-anchor" href="#_1-3-三位一体" aria-label="Permalink to &quot;1.3. 三位一体&quot;">​</a></h3>`,4)),(o(),t(d,null,{default:e(()=>[s(i,{id:"mermaid-67",class:"mermaid my-mermaid-class",graph:"graph%20TD%0A%0A%E5%9C%A8%E7%BA%BF%E7%BD%91%E7%AB%99%20--%3E%20COS%0Acos.git%20--%3E%20COS%0AMCP%20--%3E%20COS%0A"})]),fallback:e(()=>a[2]||(a[2]=[l(" Loading... ")])),_:1})),a[9]||(a[9]=r('<p>想用啥就用啥，喜欢用啥就用啥。</p><h2 id="_2-iconfont-图标" tabindex="-1">2. iconfont 图标 <a class="header-anchor" href="#_2-iconfont-图标" aria-label="Permalink to &quot;2. iconfont 图标&quot;">​</a></h2><h3 id="_2-1-问题" tabindex="-1">2.1. 问题 <a class="header-anchor" href="#_2-1-问题" aria-label="Permalink to &quot;2.1. 问题&quot;">​</a></h3><blockquote><p>痛点1：手动下载svg ——&gt; 手动上传到 cosdesign</p><p>痛点2：每次更新需肉眼检测图标是否重名，耗时耗力</p><p>痛点3：目前发现部分SVG文件上传至 codesign 后，会出现内容丢失或显示异常的问题。视觉同学通常无法定位具体原因，只能通过反复试错的方式将文件交由我们排查，这会占用我们不少时间（比如此前 x 项目中，遇到过不少图标出现此类问题，可能会花费时间协助检查和调整图标）。为了提升效率，期待提供一个 SVG 预览页面：视觉同学上传 SVG 文件后，页面可直接渲染展示效果，让他们能自主试错、调整图标并定位问题根源，减少对开发侧的依赖。</p></blockquote><h3 id="_2-2-优化" tabindex="-1">2.2. 优化 <a class="header-anchor" href="#_2-2-优化" aria-label="Permalink to &quot;2.2. 优化&quot;">​</a></h3><ol><li>支持自动下载 <code>figma</code> 中 <code>svg</code>，生成 <code>iconfont</code> 等</li><li>支持在线工具预览、下载</li></ol><blockquote><p>核心：全自动化、流程左移、安全</p></blockquote><p>注意，这里是没有 MCP 的，<strong>全自动化比 AI 更进一步</strong>，只要源头数据是正确的，根本无需任何操作。</p>',8)),(o(),t(d,null,{default:e(()=>[s(i,{id:"mermaid-111",class:"mermaid my-mermaid-class",graph:"graph%20TD%0Afigma%20--%E8%87%AA%E5%8A%A8%E4%B8%8B%E8%BD%BD%20svg--%3E%20git%0Agit%20--%3E%20json%5B%22json%22%5D%0Agit%20--%3E%20iconfont%5B%22iconfont%20%E5%AD%97%E4%BD%93%22%5D%0Aiconfont%20--%3E%20cdn%0Agit%20--%3E%20css%0A%0Agit%20--%3E%20js%0Acss%20--%3E%20cdn%0Ajs%20--%3E%20cdn%0Ajson%20--%3E%20cdn%0Acdn%20--%3E%20%E5%9C%A8%E7%BA%BF%E7%BD%91%E7%AB%99%0A%0Agit%20--%3E%20demo%0A%0Ademo%20----%3E%20%E5%9C%A8%E7%BA%BF%E7%BD%91%E7%AB%99%0A%0A%0A%E5%9C%A8%E7%BA%BF%E7%BD%91%E7%AB%99%20--%3E%20%E9%A2%84%E8%A7%88%0A%E5%9C%A8%E7%BA%BF%E7%BD%91%E7%AB%99%20--%3E%20%E5%A4%8D%E5%88%B6%0A%E5%9C%A8%E7%BA%BF%E7%BD%91%E7%AB%99%20--%3E%20%E4%B8%8B%E8%BD%BD%0A%E5%9C%A8%E7%BA%BF%E7%BD%91%E7%AB%99%20--%3E%20%E6%90%9C%E7%B4%A2%0A"})]),fallback:e(()=>a[3]||(a[3]=[l(" Loading... ")])),_:1})),a[10]||(a[10]=c("p",null,"操作节点",-1)),(o(),t(d,null,{default:e(()=>[s(i,{id:"mermaid-115",class:"mermaid my-mermaid-class",graph:"graph%20LR%0A%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%20--%E7%A0%94%E5%8F%91%E5%B9%B3%E5%8F%B0--%3E%20%E5%88%9D%E5%A7%8B%E5%8C%96%2F%E6%9B%B4%E6%96%B0%20--%22figma%20to%20svg%22--%3E%20%E5%AE%A1%E6%A0%B8%20--%22svg%20to%20iconfont%22--%3E%20%20%E5%AE%A1%E6%A0%B8%2F%E6%9F%A5%E7%9C%8B%20--%E5%8F%91%E5%B8%83--%3E%20%E9%AA%8C%E8%AF%81%0A"})]),fallback:e(()=>a[4]||(a[4]=[l(" Loading... ")])),_:1})),a[11]||(a[11]=r('<p>涉及内容较多</p><ol><li><code>figma</code> 中 <code>svg</code> 下载</li><li><code>git</code> 存储</li><li><code>svg</code> 生成 <code>iconfont</code> 字体、CSS</li><li>上传 CSS/字体 到 <code>cos</code></li><li>网站拉取</li><li><code>cos</code> 同步到 <code>git</code></li></ol><p>还有工程方面的：</p><ol><li>图标工程创建</li><li>图标工程管理</li><li>手动触发更新</li><li>更新时发MR及审核</li></ol><p><code>icon.git</code> 功能</p><ol><li>执行 <code>svg</code> 手动更新，创建 MR 到 <code>master</code></li><li>执行 <code>iconfont</code> 生成，创建 MR，从 <code>master</code> 到 <code>release</code></li><li>执行上传 CDN，<code>release</code> 分支上进行</li></ol><h3 id="_2-3-操作指南" tabindex="-1">2.3. 操作指南 <a class="header-anchor" href="#_2-3-操作指南" aria-label="Permalink to &quot;2.3. 操作指南&quot;">​</a></h3><h4 id="_2-3-1-新建项目" tabindex="-1">2.3.1. 新建项目 <a class="header-anchor" href="#_2-3-1-新建项目" aria-label="Permalink to &quot;2.3.1. 新建项目&quot;">​</a></h4><p>研发平台点击“新建图标项目”，填写表单并提交。</p><img src="https://cdn.uwayfly.com/article/2026/1/own_mike_GNWCcQwdCDE4SQhy.png" width="700"><h4 id="_2-3-2-项目管理" tabindex="-1">2.3.2. 项目管理 <a class="header-anchor" href="#_2-3-2-项目管理" aria-label="Permalink to &quot;2.3.2. 项目管理&quot;">​</a></h4><p>研发平台点击“图标项目管理”，可以编辑项目、查看图标、更新图标、复制样式链接等。</p><img src="https://cdn.uwayfly.com/article/2026/1/own_mike_yitDy7K56Q7yCtnx.png" width="700"><h4 id="_2-3-3-图标查看" tabindex="-1">2.3.3. 图标查看 <a class="header-anchor" href="#_2-3-3-图标查看" aria-label="Permalink to &quot;2.3.3. 图标查看&quot;">​</a></h4><p>点击项目卡片，可以进入项目图标示例页面，如 <a href="https://mobile.woa.com/pmd-icon/match-common/demo.html" target="_blank" rel="noreferrer">https://mobile.woa.com/pmd-icon/match-common/demo.html</a>，可进行 <code>svg/class/unicode</code> 不同形式的查看和校验。</p><img src="https://cdn.uwayfly.com/article/2026/1/own_mike_riaKAiK8ypCAZSG4.png" width="700"><p>项目卡片下方有图标CSS链接，如 <a href="https://image-1251917893.file.myqcloud.com/pmd-icon/match-common/pmg-iconfont.css" target="_blank" rel="noreferrer">https://image-1251917893.file.myqcloud.com/pmd-icon/match-common/pmg-iconfont.css</a>，点击即可复制。</p><img src="https://cdn.uwayfly.com/article/2026/1/own_mike_FNFaiQ6xHSY7QJiz.png" width="700"><h4 id="_2-3-4-图标更新" tabindex="-1">2.3.4. 图标更新 <a class="header-anchor" href="#_2-3-4-图标更新" aria-label="Permalink to &quot;2.3.4. 图标更新&quot;">​</a></h4><p>项目卡片右上角点击“更新”，会触发<a href="https://devops.woa.com/console/pipeline/tip-h5/p-c988624124334c24b6872b10053c763e/history/history/4?page=1&amp;pageSize=20" target="_blank" rel="noreferrer">流水线</a>，进行图标的更新或初始化。</p><img src="https://cdn.uwayfly.com/article/2026/1/own_mike_DZpz5NszjiMebNMx.png" width="700"><p>该流水线会创建一个<a href="https://git.woa.com/pmd-mobile/pmd-h5/icon" target="_blank" rel="noreferrer">icon.git</a>的 MR，开发人员可以查看 SVG 列表是否符合预期，如 <a href="https://git.woa.com/pmd-mobile/pmd-h5/icon/-/merge_requests/1" target="_blank" rel="noreferrer">https://git.woa.com/pmd-mobile/pmd-h5/icon/-/merge_requests/1</a>。</p><img src="https://cdn.uwayfly.com/article/2026/1/own_mike_Cp5CJkAmfThK38Jj.png" width="700"><h4 id="_2-3-5-字体、css-更新" tabindex="-1">2.3.5. 字体、CSS 更新 <a class="header-anchor" href="#_2-3-5-字体、css-更新" aria-label="Permalink to &quot;2.3.5. 字体、CSS 更新&quot;">​</a></h4><p>上面 MR 通过后，自动触发 <code>svg</code> 转 <code>iconfont</code> 流程，并上传预览页面到内网，以及创建 <code>master</code> 到 <code>release</code> 的MR，通过会才会同步到 CDN。</p><p>这里的审核会为了防止生成的 <code>iconfont</code> 不符合预期，避免引起线上问题。</p><p>举例，<a href="https://git.woa.com/pmd-mobile/pmd-h5/icon/-/merge_requests/2" target="_blank" rel="noreferrer">https://git.woa.com/pmd-mobile/pmd-h5/icon/-/merge_requests/2</a>。</p><img src="https://cdn.uwayfly.com/article/2026/1/own_mike_WkdmNAbxtf7zsGKS.png" width="700"><h3 id="_2-4-迁移建议" tabindex="-1">2.4. 迁移建议 <a class="header-anchor" href="#_2-4-迁移建议" aria-label="Permalink to &quot;2.4. 迁移建议&quot;">​</a></h3><ol><li>新项目建议使用这套图标库，全自动化</li><li>老项目，如果还在频繁更新的话，也建议早点迁移、做验证</li><li>老项目，不咋更新的，就没有迁移的必要了</li></ol><h3 id="_2-5-faq" tabindex="-1">2.5. FAQ <a class="header-anchor" href="#_2-5-faq" aria-label="Permalink to &quot;2.5. FAQ&quot;">​</a></h3><ol><li>类名会不会重复</li></ol><p>基于流程整体左移的思路，由设计师保证不重复，由于在一张画布或一个 <code>figma</code> 文件中，能较轻松找到哪个重复。</p><p>对于语义确实重复的，可以添加 <code>-1</code>、<code>-2</code> 等标识，比如 <code>edit-1</code>、<code>edit-2</code>。</p><ol start="2"><li>图标黑框</li></ol><p>检查是不是设置了 <code>clip content</code>，需要去掉。</p><ol start="3"><li>上传到 <code>devcloud</code> 失败</li></ol><p><s>新增的项目可能需要登录 <code>devcloud</code> 手动新增一个目录。</s> 已使用流水线解决。</p><ol start="4"><li>有没有刷新 CDN 缓存</li></ol><p>有。</p><p>上传的所有文件，包括位图、图标、字体、其他文件等，使用的所有方式，包括在线网站、MCP、<code>cos.git</code> 等，都会进行 CDN 缓存刷新！</p><h2 id="_3-字体" tabindex="-1">3. 字体 <a class="header-anchor" href="#_3-字体" aria-label="Permalink to &quot;3. 字体&quot;">​</a></h2><h3 id="_3-1-问题" tabindex="-1">3.1. 问题 <a class="header-anchor" href="#_3-1-问题" aria-label="Permalink to &quot;3.1. 问题&quot;">​</a></h3><blockquote><p>痛点：手动处理(需使用font-spider进行特殊字体压缩，然后利用其他工具进行字体多格式转换)设计师给到的全量字体包，对字体进行精简——&gt; 上传到字体资源存储仓库，用作记录存储—— &gt; 手动上传到业务cos桶</p></blockquote><p>之前的压缩流程：<a href="https://doc.weixin.qq.com/doc/w3_AUgAMAa1AB47Xwn5SKNR0STF01euz?scode=AJEAIQdfAAoU2uNIqAAUgAMAa1AB4" target="_blank" rel="noreferrer">https://doc.weixin.qq.com/doc/w3_AUgAMAa1AB47Xwn5SKNR0STF01euz?scode=AJEAIQdfAAoU2uNIqAAUgAMAa1AB4</a></p><h3 id="_3-2-优化" tabindex="-1">3.2. 优化 <a class="header-anchor" href="#_3-2-优化" aria-label="Permalink to &quot;3.2. 优化&quot;">​</a></h3><p>用户上传全量字体包 ——&gt; 输入对应文字 ——&gt; 一键压缩 ——&gt; 上传到 cos，并返回对应字体在线链接。</p><p>操作节点</p>',48)),(o(),t(d,null,{default:e(()=>[s(i,{id:"mermaid-340",class:"mermaid my-mermaid-class",graph:"graph%20LR%0A%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%20--%E7%A0%94%E5%8F%91%E5%B9%B3%E5%8F%B0--%3E%20%E5%88%9D%E5%A7%8B%E5%8C%96%2F%E6%9B%B4%E6%96%B0%20--fontmin--%3E%20%E5%AD%97%E4%BD%93%E5%8E%8B%E7%BC%A9%20--%E4%B8%8A%E4%BC%A0--%3E%20%E9%AA%8C%E8%AF%81%0A"})]),fallback:e(()=>a[5]||(a[5]=[l(" Loading... ")])),_:1})),a[12]||(a[12]=r('<p>无需手动多工具来回跳转，全部闭环操作。</p><p>几个核心点</p><ol><li>加载字体文件到 <code>document</code></li><li>为校验文字设置上传的字体</li></ol><h3 id="_3-3-操作指南" tabindex="-1">3.3. 操作指南 <a class="header-anchor" href="#_3-3-操作指南" aria-label="Permalink to &quot;3.3. 操作指南&quot;">​</a></h3><h4 id="_3-3-1-新建项目" tabindex="-1">3.3.1. 新建项目 <a class="header-anchor" href="#_3-3-1-新建项目" aria-label="Permalink to &quot;3.3.1. 新建项目&quot;">​</a></h4><p>研发平台点击“<a href="https://mobile.woa.com/rd-platform-web/#/font-project/new" target="_blank" rel="noreferrer">新建字体项目</a>”，填写表单并提交。</p><img src="https://cdn.uwayfly.com/article/2026/1/own_mike_DxkpGxEhEfAbtkyz.png" width="700"><h4 id="_3-3-2-项目管理" tabindex="-1">3.3.2. 项目管理 <a class="header-anchor" href="#_3-3-2-项目管理" aria-label="Permalink to &quot;3.3.2. 项目管理&quot;">​</a></h4><p>研发平台点击“<a href="https://mobile.woa.com/rd-platform-web/#/font-project/list" target="_blank" rel="noreferrer">字体项目管理</a>”，可以编辑项目、复制字体链接等。</p><img src="https://cdn.uwayfly.com/article/2026/1/own_mike_T5ZeXJSdEbrppzyf.png" width="700"><p>项目卡片下方有字体链接，如 <a href="https://image-1251917893.file.myqcloud.com/pmd-font/gp-peace/peace.ttf" target="_blank" rel="noreferrer">https://image-1251917893.file.myqcloud.com/pmd-font/gp-peace/peace.ttf</a>，点击即可复制。</p><h4 id="_3-3-3-字体项目更新" tabindex="-1">3.3.3. 字体项目更新 <a class="header-anchor" href="#_3-3-3-字体项目更新" aria-label="Permalink to &quot;3.3.3. 字体项目更新&quot;">​</a></h4><p>项目卡片右上角点击“编辑”，可进行字体项目的更新或初始化。</p><img src="https://cdn.uwayfly.com/article/2026/1/own_mike_MyYmsGWbFCGyBQcf.png" width="700"><img src="https://cdn.uwayfly.com/article/2026/1/own_mike_ATQ48yy6iKwXJkby.png" width="700"><h4 id="_3-3-4-字体压缩" tabindex="-1">3.3.4. 字体压缩 <a class="header-anchor" href="#_3-3-4-字体压缩" aria-label="Permalink to &quot;3.3.4. 字体压缩&quot;">​</a></h4><p>点击项目卡片，可以进入字体压缩页面，如 <a href="https://mobile.woa.com/rd-platform-web/#/font-min?id=gp-peace" target="_blank" rel="noreferrer">https://mobile.woa.com/rd-platform-web/#/font-min?id=gp-peace</a>，可进行字体压缩、上传。</p><img src="https://cdn.uwayfly.com/article/2026/1/own_mike_3AiFwCHhzQbnNCh4.png" width="700"><h3 id="_3-4-图标和字体的不同" tabindex="-1">3.4. 图标和字体的不同 <a class="header-anchor" href="#_3-4-图标和字体的不同" aria-label="Permalink to &quot;3.4. 图标和字体的不同&quot;">​</a></h3><p>对比一下图标和字体设计上的不同</p><ol><li>图标由设计师在最上游处理好，重构、前端无需介入，全自动化，只需手动触发更新、审核即可</li><li>字体需由重构或前端手动上传精简后的文字，这一步暂时无法取消。相应的，字体也不再需要两次审核，因为手动压缩的页面处已经相当于审核了，只要最终同步到 COS 后的校验即可</li><li>图标项目需要有自己的 <code>git</code> 仓库，来保存无需上传到 COS 的 <code>svg</code> 文件等，而字体项目不需要，它没有中间文件，所有的字体文件都需要上传 COS，所以它不用新建仓库</li><li>图标项目需要有自己的蓝盾流水线，用于执行拉取 SVG、生成 <code>iconfont</code>、创建 MR等，字体项目不需要</li></ol><table tabindex="0"><thead><tr><th>类别</th><th>图标</th><th>字体</th></tr></thead><tbody><tr><td>手动处理</td><td>无</td><td>有</td></tr><tr><td>多次审核</td><td>有</td><td>无</td></tr><tr><td>Git 仓库</td><td>有</td><td>无</td></tr><tr><td>流水线</td><td>有</td><td>无</td></tr></tbody></table>',22))])}const B=n(m,[["render",E]]);export{b as __pageData,B as default};
