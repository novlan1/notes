import{_ as t,c as i,o as s,a2 as a}from"./chunks/framework.CriqKoQt.js";const k=JSON.parse('{"title":"Network V2 使用","description":"","frontmatter":{},"headers":[],"relativePath":"docs/work/115.network-v2.md","filePath":"docs/work/115.network-v2.md","lastUpdated":1771447723000}'),n={name:"docs/work/115.network-v2.md"};function o(d,e,l,c,p,r){return s(),i("div",null,e[0]||(e[0]=[a(`<div class="info custom-block"><p class="custom-block-title">作者</p><p>novlan1</p><p>2025.12.29</p></div><h1 id="network-v2-使用" tabindex="-1">Network V2 使用 <a class="header-anchor" href="#network-v2-使用" aria-label="Permalink to &quot;Network V2 使用&quot;">​</a></h1><h2 id="优势" tabindex="-1">优势 <a class="header-anchor" href="#优势" aria-label="Permalink to &quot;优势&quot;">​</a></h2><p><code>pmd-network-v2</code> 相比 <code>pmd-network</code> 有以下优势</p><ol><li>支持异步拦截器</li><li>QQ内打开微信小程序时，支持选择QQ/微信登录</li></ol><h2 id="业务接入流程" tabindex="-1">业务接入流程 <a class="header-anchor" href="#业务接入流程" aria-label="Permalink to &quot;业务接入流程&quot;">​</a></h2><ol><li>升级对应的项目公共配置</li></ol><table tabindex="0"><thead><tr><th>项目类型</th><th>公共配置包</th></tr></thead><tbody><tr><td>uniapp Vue2</td><td><code>pnpm i @tencent/project-config-uni-vue@latest</code></td></tr><tr><td>uniapp Vue3</td><td><code>pnpm i @tencent/project-config-uni-vite@latest</code></td></tr><tr><td>Vue2</td><td><code>pnpm i @tencent/project-config-vue@latest</code></td></tr><tr><td>Vue3</td><td><code>pnpm i @tencent/project-config-vite@latest</code></td></tr><tr><td>Pixui</td><td><code>pnpm i @tencent/project-config-pixui@latest</code></td></tr></tbody></table><ol start="2"><li>项目公共配置传入 <code>usePMDNetworkV2</code> 为 <code>true</code></li></ol><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 不同项目类型使用不同的方法</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUniVue3ViteConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 其他参数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  usePMDNetworkV2: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><ol start="3"><li>升级 <code>pmd</code> 依赖</li><li>如果业务中有单独引入 <code>pmd-vue/lib/network</code> 或 <code>pmd-business/lib/network</code> 中的方法或类，改成引入 <code>pmd-business/lib/network-v2</code></li></ol><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">- import xx from &#39;@tencent/pmd-vue/lib/network/xx&#39;</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">- import xx from &#39;@tencent/pmd-business/lib/network/xx&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+ import xx from &#39;@tencent/pmd-business/lib/network-v2/xx&#39;</span></span></code></pre></div><h2 id="说明" tabindex="-1">说明 <a class="header-anchor" href="#说明" aria-label="Permalink to &quot;说明&quot;">​</a></h2><ol><li>采用渐进升级，老项目可继续使用 <code>network v1</code></li><li><code>network v1</code> 不再支持修改，修改需要在 <code>v2</code> 版本上进行，并参考上面方式在业务中升级到 <code>network v2</code></li><li><code>src/api</code> 使用了 <code>network v1</code>，所以需要升级 <code>project-config-x</code>，进行 <code>usePMDNetworkV2</code> 的配置</li></ol>`,14)]))}const u=t(n,[["render",o]]);export{k as __pageData,u as default};
